<!DOCTYPE html>
<html>
<head>
  <title>My Restaurant App</title>
      <style type="text/css">
    </style>
  <%= stylesheet_link_tag 'application', media: 'all' %>
  <%= javascript_include_tag 'application'%>
  <%= csrf_meta_tags %>

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5Q2yOk-Jz77cOdx0xJCZIj0GI4mlOnNo">
    </script>
    <script type="text/javascript">
    var mylat = 40.5472;
    var mylong = 12.282715;
    var map;
    var myLatlng;
    //$( document ).ready(function() {
    
    //var x = document.getElementById("demo");
    function getPosition() {
    if (navigator.geolocation) {
        
        myloc = navigator.geolocation.getCurrentPosition(setPosition);

    } else {
      console.log("test");
        //x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }
  
  
    function setPosition(position) {
      
        mylat = position.coords.latitude;
        mylong = position.coords.longitude; 

        var mapOptions = {
          center: { lat: mylat, lng: mylong},
          zoom: 15
        };
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

      myLatlng = new google.maps.LatLng(mylat, mylong);

        var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title:"Hello World!"
      });

    }
    
      google.maps.event.addDomListener(window, 'load', getPosition);
      google.maps.event.addDomListener(window, "resize", function() {
       var center = map.getCenter();
       google.maps.event.trigger(map, "resize");
       map.setCenter(center); 
      });

      //google.maps.event.addDomListener(window, 'load', initialize);
    </script>

  <meta name="viewport" content="width=device-width, initial-scale=1" >
</head>
<body>
  <%= render 'restaurants/navigation' %>
    <div id="main-container" class="container-fluid">
            <div class="row">
            <div class="col-xs-12">
             <% flash.each do |name, msg| -%>
               <%= content_tag :div, msg, class: "alert alert-#{name}" %>
              <% end -%>
            </div>
          </div>
<%= yield %>
    </div>
</body>
</html>
